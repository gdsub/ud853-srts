1
00:00:00,560 --> 00:00:04,330
既然我们已经在Android manifest.xml中注册了WeatherProvider
Now that we've registered our weather provider in the Android manifest,

2
00:00:04,330 --> 00:00:06,820
是时候来编写WeatherProvider的代码了
it's time to begin coding our weather provider.

3
00:00:08,020 --> 00:00:12,890
这是实现Content Provider的过程中最终也是最关键的一步
This is the final and most involved step in implementing our content provider.

4
00:00:12,890 --> 00:00:17,018
我们即将着手补完这些Content Provider的核心函数
We'll be filling out these core content provider functions.

5
00:00:17,018 --> 00:00:20,040
除了我们已经完成的onCreate函数
Except for onCreate, which we've already done for

6
00:00:20,040 --> 00:00:24,220
我们也已经添加了一个（WeatherDbHelper的）实例变量作为数据库助手
you, we've added an instance variable for our data base helper.

7
00:00:24,220 --> 00:00:26,460
我们在onCreate中初始化这个实例
We initialize this in our onCreate function.

8
00:00:26,460 --> 00:00:31,050
并会在大部分的ContentProvider方法中使用这个数据库助手
We will use this database helper in most of the content provider methods.

9
00:00:31,050 --> 00:00:34,980
我们先来看看ContentProvider方法里的getType方法
The first of the content provider methods that we will look at is getType.

10
00:00:34,980 --> 00:00:38,960
对我们的app来说实现getType的功能版本
Implementing the functional version of getType isn't strictly necessary for

11
00:00:38,960 --> 00:00:40,490
并非严格需要
our application.

12
00:00:40,490 --> 00:00:44,200
但这是一个非常好的方法来回顾我们即将着手的URI
But it's a nice way to review what uris we're planning to handle.

13
00:00:44,200 --> 00:00:47,540
我们已经完成了部分getType的功能
We partially filled out the getType function for you.

14
00:00:47,540 --> 00:00:51,820
我们使用之前建立的UriMatcher工具类来处理传入的uri
We use the urimatcher we built earlier to match the given uri

15
00:00:51,820 --> 00:00:54,690
用来匹配我们之前编译好的表达式
against the expressions we've compiled in.

16
00:00:54,690 --> 00:00:58,580
每次匹配都会返回在WeatherContract中定义的类型
For each match, we return the types that we've defined in the weather contract.

17
00:00:58,580 --> 00:01:02,560
谨记  这次传达的关键信息是content uri是否
Remember that the key information that this conveys, is weather the content uri

18
00:01:02,560 --> 00:01:07,560
返回一个包含单一记录的item类型的数据库cursor
will be returning a database cursor containing a single record type item, or

19
00:01:07,560 --> 00:01:10,200
还是包含多个记录的directory类型
multiple records type directory.

20
00:01:10,200 --> 00:01:13,420
除了数据库cursor  ContentProvider也可以用来返回
Content providers can also be used to return other kinds of data

21
00:01:13,420 --> 00:01:15,410
其他类型的数据
than just database cursors.

22
00:01:15,410 --> 00:01:19,590
比如说  如果我们想要ContentProvider以content uri返回一个JEPG图像
For example, if we wanted the content provider to return JPEG images for

23
00:01:19,590 --> 00:01:24,114
我们应该用这个函数返回标准的mime类型
a content uri, we would have this function return the standard mime type,

24
00:01:24,114 --> 00:01:26,430
即image/jpeg
image/jpeg.

25
00:01:26,430 --> 00:01:31,220
接下来我们来谈谈TestProvider中testGetType方法
Let's un comment the testGetType test from within TestProvider.

26
00:01:31,220 --> 00:01:33,660
这为我们接下来的工作做了准备
This will get us ready for the next coding exercise.

